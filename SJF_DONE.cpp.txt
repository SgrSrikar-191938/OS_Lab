#include<iostream>
#include<vector>
#include<algorithm>
using namespace std;

int n,t=0,avg_tat=0,avg_wt=0;
class Process{
    public:
    int pid;
    int bt;
    int art;

};

bool cmp2(Process a,Process b){
     if(a.bt < b.bt)
     return true;
     else
     return false;
}

bool cmp1(Process a,Process b){
    if(a.art < b.art)
    return true;
    else if(a.art==b.art)
    {
        if(a.bt<b.bt)
        return true;
    }
    else
    return false;
}

int calculate_time(vector<Process> p,int n){
    p.resize(n);
    sort(p.begin(),p.end(),cmp1);
    int t_arr[n];
 
    for(int i=0;i<n;i++){
        int j=i;
        while(p[j].art<=t&&j!=n){
            j++;
        }
        sort(p.begin()+i,p.begin()+j,cmp2);
        t_arr[i]=t;
        t+=p[i].bt;
    }
    cout<<"\n";
    cout<<"PROCESS  ARRIVAL_TIME\tBURST_TIME\tCOMPLETION_TIME\tTURN_AROUND_TIME\tWAITING_TIME\n";
    for (int i=0; i<n; i++){
        cout << p[i].pid << "\t\t"; 
        cout << p[i].art << "\t\t";
        cout << p[i].bt << "\t\t";
        if(i<n-1)
        cout << t_arr[i+1] << "\t\t"; 
        else
        cout<<t_arr[i]+p[i].bt<< "\t\t";
        cout << t_arr[i]-p[i].art+p[i].bt << "\t\t"; 
        avg_tat+=t_arr[i]-p[i].art+p[i].bt;
        cout << t_arr[i]-p[i].art << "\t\t"; 
        avg_wt+=t_arr[i]-p[i].art;
        cout <<"\n";
        }
    
    avg_wt=avg_wt/n;
    avg_tat=avg_tat/n;
    cout<<endl<<"The average waiting time of the processes is: "<<avg_wt;
    cout<<endl<<"The average turn around time of the processes is: "<<avg_tat;
return 0;
}
int main()
{
    vector<Process> p;
    cout<<"Enter the number of processes: ";
	cin>>n;
	p.resize(n);
	for(int i = 0 ; i < n; i++){
		int pid, art, bt;
		cout<<endl<<"Enter the pid of process "<<i<<" : ";
		cin>>p[i].pid;
		cout<<endl<<"Enter the arrival time of process "<<i<<" : ";
		cin>>p[i].art;
		cout<<endl<<"Enter the burst time of process "<<i<<" : ";
		cin>>p[i].bt;
	}
    calculate_time(p,n);
    return 0;
}

